{"version":3,"sources":["components/SearchForm.js","components/Card.js","components/HomePage.js","components/App.js","index.js"],"names":["SearchForm","props","state","value","typing","typingTimeout","handleChange","bind","handleSubmit","handleKeyDown","event","this","setState","target","clearTimeout","setTimeout","callback","length","preventDefault","key","className","onSubmit","id","placeholder","type","onChange","onKeyDown","style","paddingTop","color","fontSize","href","rel","paddingRight","textAlign","totalBooks","React","Component","CardDownload","data","data_dict","pdf_url","push","pdf_size","toFixed","epub_url","epub_size","other_url","format","other_size","Fragment","map","download_link","BookCard","url","image","alt","title","src","concat","image_url","description","author","substring","year","pages","HomePage","books","initialBooks","search","handleSearchCallback","ctrlKey","composed","shiftKey","document","getElementById","focus","axios","get","then","response","count","post","addEventListener","search_text","submit","encodeURIComponent","book","isbn","App","ReactDOM","render"],"mappings":"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","file":"static/js/main.36c72aec.chunk.js","sourcesContent":["import React, { Fragment } from 'react';\nimport axios from 'axios';\n\nclass SearchForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      typing: false,\n      // suggest: '',\n      typingTimeout: 0\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({value: event.target.value});\n    if(this.state.typingTimeout){\n      clearTimeout(this.state.typingTimeout)\n    }\n    this.setState({\n      value: event.target.value,\n      typing: false,\n      typingTimeout: setTimeout(() => {\n        this.props.callback(this.state.value, false)\n      }, 300)\n    })\n    // if(event.target.value.length > 2){\n    //   axios.post('/suggest/'+event.target.value)\n    //   .then( response => {\n    //     if(response.data.length > 0)\n    //       this.setState({suggest: response.data[0].suggest.toLowerCase()})\n    //   }).catch(error => console.error(error))\n    // } else{\n    //   this.setState({suggest: ''})\n    // }\n  }\n\n  handleSubmit(event) {\n    if(this.state.value.length > 0)\n        this.props.callback(this.state.value, true)\n    event.preventDefault();\n  }\n\n  handleKeyDown(event){\n    // if(event.keyCode === 9 && this.state.value.length < this.state.suggest.length){\n    //   this.props.callback('\"'+this.state.suggest+'\"', false)\n    //   this.setState({value: this.state.suggest})\n    //   event.preventDefault()\n    // }\n    if(event.key === 'Enter'){\n      event.preventDefault()\n      this.handleSubmit(event)\n    }\n  }\n\n  render() {\n    return (\n      <Fragment>\n      <form className=\"search-form\" onSubmit={this.handleSubmit}>\n          <div className=\"editable item\">\n            {/* <input className=\"search-input search-suggestion\"\n              type=\"text\"\n              placeholder={this.state.value.length > 2 ? this.state.suggest : ''}\n              disabled=\"True\"\n            /> */}\n            <input className=\"search-input search-main\"\n              id=\"search-input-box\"\n              placeholder=\"Search Books\"\n              type=\"text\" \n              value={this.state.value}\n              onChange={this.handleChange}\n              onKeyDown={this.handleKeyDown}\n            />\n            </div>\n          <div className=\"item\" style={{paddingTop: '5px', color: 'gray', fontSize: '14px'}} >Hit Enter to load all results.&nbsp;\n          <a href=\"https://sqlite.org/fts5.html#full_text_query_syntax\" target=\"_blank\" rel=\"noopener noreferrer\">\n            Query Syntax\n          </a>\n          </div>\n      </form>\n      <div className=\"item\" style={{paddingRight: '20px', color: 'gray', fontSize: '14px', textAlign: \"right\"}} >\n        Total Books : {this.props.totalBooks}\n      </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchForm;","import React from 'react'\n\nfunction CardDownload(props){\n  let data = props.props  \n  let data_dict = []\n    if(data.pdf_url !== \"None\")\n      data_dict.push(<a target=\"_blank\" rel=\"noopener noreferrer\" className=\"book-link-pdf App-link\" href={data.pdf_url}>PDF({(data.pdf_size/(1024*1024)).toFixed(2)}MB)</a>)\n    if(data.epub_url !== \"None\")\n      data_dict.push(<a target=\"_blank\" rel=\"noopener noreferrer\" className=\"book-link-epub App-link\" href={data.epub_url}>EPUB({(data.epub_size/(1024*1024)).toFixed(2)}MB)</a>)\n    if(data.other_url !== \"None\")\n      data_dict.push(<a target=\"_blank\" rel=\"noopener noreferrer\" className=\"book-link-epub App-link\" href={data.other_url}>{data.format}({(data.other_size/(1024*1024)).toFixed(2)}MB)</a>)\n    if(data_dict.length > 0){\n      return (\n        <React.Fragment>\n          {\n            data_dict.map( download_link => download_link )\n          }\n        </React.Fragment>\n      )\n    }\n    else\n      return \"\"\n  }\n  \n  function BookCard(props){\n    return(\n      <div className=\"book-card\">\n        <div className=\"book-card-img\">\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href={props.props.url}>\n            {\n                props.props.image != null\n                ?(<img alt={props.props.title} className=\"book-card-img-tag\" src={\"data:image/jpeg;base64,\".concat(props.props.image)}/>)\n                :(<img alt={props.props.title} className=\"book-card-img-tag\" src={props.props.image_url}/>)\n            }\n            </a>\n        </div>\n        <div className=\"book-card-details\">\n          <div className=\"book-card-tite\">\n            <span className=\"card-span-title\"> {props.props.title} </span>\n          </div>\n          <div className=\"book-card-subtitle\">\n          </div>\n          <div className=\"book-card-description\">\n            <span className=\"book-desc-span\">{\n              props.props.description.length > 0 ?\n              props.props.description\n              : \"Book description not available.\"\n            }\n            </span>\n          </div>\n          <div className=\"book-card-misc\">\n              <span style={{'marginLeft': '0px'}}><b>Author:</b>{props.props.author.substring(0, 18)},</span>\n              <span style={{'marginLeft': '5px'}}><b>Published:</b>{props.props.year},</span>\n              <span style={{'marginLeft': '5px'}}><b>Pages:</b>{props.props.pages}</span>\n          </div>\n        </div>\n        <div className=\"book-card-download\">\n          <CardDownload props={props.props} />\n        </div>\n      </div>\n    )\n  }\n\nexport default BookCard","import React from 'react'\nimport SearchForm from './SearchForm'\nimport axios from 'axios'\nimport BookCard from './Card'\n\nclass HomePage extends React.Component\n{\n    constructor(props){\n        super(props)\n        this.state = {\n            books: false,\n            initialBooks: false,\n            search: '',\n            totalBooks: ''\n        }\n        this.handleSearchCallback = this.handleSearchCallback.bind(this)\n        this.handleKeyDown = this.handleKeyDown.bind(this)\n    }\n\n    handleKeyDown(event){\n        if(event.ctrlKey && event.composed && event.shiftKey && event.key === 'F')\n            document.getElementById(\"search-input-box\").focus()\n    }\n\n    componentDidMount(){\n        let search = \"/programming OR operating system OR algorithm \\\n                        OR data structures OR science OR network\\\n                        OR engineering OR hardware OR embedded OR database\\\n                        /48\"\n        axios.get('/totalbooks').then(\n            (response) => {\n                this.setState({\n                    totalBooks: response.data[0].count\n                })\n            }\n        )\n        axios.post(search).then(\n            (response) => {\n                this.setState({\n                    books: response.data,\n                    initialBooks: response.data\n                })\n            }\n        )\n        document.addEventListener('keydown', this.handleKeyDown, false)\n    }\n\n    handleSearchCallback(search_text, submit){\n        if(search_text.length > 0){\n            search_text = encodeURIComponent(search_text)\n        if(submit){\n            axios.post(\"/\"+search_text).then(\n                (response) => {\n                    this.setState({\n                        books: response.data ? response.data : []\n                    })\n                }\n            )\n        }else if(search_text.length > this.state.search.length) {\n          axios.post(\"/\"+search_text+\"/\"+ 12).then(\n            (response) => {\n                this.setState({\n                    books: response.data ? response.data : []\n                })\n            }\n          )\n        }\n        this.setState({search: search_text})\n        }\n        else{\n            this.setState({\n                books: this.state.initialBooks,\n                search: ''\n            })\n        }\n        \n    }\n\n    render(){\n        if(this.state.books){\n        return(\n            <React.Fragment>\n                <div className=\"search-wraper\">\n                    <SearchForm callback={this.handleSearchCallback} totalBooks={this.state.totalBooks}/>\n                </div>\n                <div className=\"book-wraper\" >\n                    {\n                        this.state.books.map(book =>\n                            <BookCard\n                                key={book.isbn === true ? book.isbn : book.url.substring(27, book.url.length)}\n                                props={{...book}}\n                            />\n                        )\n                    }\n                </div>\n            </React.Fragment>\n        )\n    }\n    else return \"\"\n    }\n}\n\nexport default HomePage;","import React from 'react';\nimport './App.css';\nimport HomePage from './HomePage'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <HomePage />      \n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}